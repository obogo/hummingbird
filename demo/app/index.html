<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../../src/app/__package__.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../build/belt-app.js" type="text/javascript" charset="utf-8"></script>
    <style type="text/css">
        .app1 {
            background-color: rgba(255, 0, 0, 0.5);
        }
        .app2 {
            background-color: rgba(0, 200, 0, 0.5);
        }
    </style>
</head>
<body>

<div go-app="app1" class="app1"></div>
<div go-app="app2" class="app2">
    <div dr-same go-click="changeName('John')">A, { name }!<div dr-isolate go-click="remove()">&nbsp;&nbsp;&nbsp;B, { profile.name }!</div></div>
    <div dr-inherit go-click="changeName('Jared')">C, { name }!<div>D, { name }!</div></div>
    <div dr-same ev-click="changeName('Wes')">E, { name }!</div>
    <div dr-isolate><span>F, { name }!</span><div dr-inherit go-click="name='Sally'">&nbsp;&nbsp;&nbsp;G, { name|upper }!</div></div>
</div>

<script id="tpWes" type="template/text">
    <div dr-same ev-click="changeName('Wes')">E, { name }!</div>
</script>

<script>
    var app1 = app.framework.module('app1')
    .set('drSame', function() {
        return {
            link: function(scope, el) {
                scope.name = 'Rob';
                scope.changeName = function(name) {
                    scope.name = name;
                };
            }
        };
    })
    .set('drIsolate', function() {
        return {
            scope: {
                profile: {
                    name: 'Wes'
                }
            },
            link: function(scope, el, module) {
                scope.remove = function () {
                    module.removeChild(el);
                };
                scope.$on('$destroy', function () {
                    console.log("I am destroying myself...");
                });
            }
        };
    })
    .set('drInherit', function () {
        return {
            scope:true,
            link: function(scope, el, module) {
                console.log(module.get('$rootScope'));
            }
        }
    })
    .filter('upper', function () {
        return function (str) {
            return str && str.toUpperCase() || '';
        };
    })
    .set('tpHello', '<div dr-same go-click="changeName(\'John\')">A, { name }!<div dr-isolate go-click="remove()">&nbsp;&nbsp;&nbsp;B, { profile.name }!</div></div>')
    .set('tpHello2', '<div dr-inherit go-click="changeName(\'Jared\')">C, { name }!<div>D, { name }!</div></div>')
    .set('tpWes', document.getElementById('tpWes').innerHTML)
    .set('tpDeep', '<div dr-isolate><span>F, { name }!</span><div dr-inherit go-click="name=\'Sally\'">&nbsp;&nbsp;&nbsp;G, { name|upper }!</div></div>');

    app1.bootstrap(function (module) {
        module.addChild(module.element(), module.view('tpHello'));
        module.addChild(module.element(), module.view('tpHello2'));
        module.addChild(module.element(), module.view('tpWes'));
        module.addChild(module.element(), module.view('tpDeep'));
    });
</script>
<script>
    var app2 = app.framework.module('app2')
    .set('drSame', function() {
        return {
            link: function(scope, el) {
                scope.name = 'Rob';
                scope.changeName = function(name) {
                    scope.name = name;
                };
            }
        };
    })
    .set('drIsolate', function() {
        return {
            scope: {
                profile: {
                    name: 'Wes'
                }
            },
            link: function(scope, el, module) {
                scope.remove = function () {
                    module.removeChild(el);
                };
                scope.$on('$destroy', function () {
                    console.log("I am destroying myself...");
                });
            }
        };
    })
    .set('drInherit', function () {
        return {
            scope:true,
            link: function(scope, el, module) {
                console.log(module.get('$rootScope'));
            }
        }
    })
    .filter('upper', function () {
        return function (str) {
            return str && str.toUpperCase() || '';
        };
    });

</script>
</body>
</html>