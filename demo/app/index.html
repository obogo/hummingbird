<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../../src/app/__package__.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../src/app/framework.js" type="text/javascript" charset="utf-8"></script>
</head>
<body go-controller="MainCtrl">

<div go-app="app1"></div>
<div go-app="app2"></div>

<div>This is our application</div>

<script id="tpWes" type="template/text">
    <div dr-your ev-click="changeName('Wes')">Hello, { name }!</div>
</script>

<script>
    var body = document.body;
    var app = app.framework.module('app')
    .set('MainCtrl', function() {
        console.log('MainCtrl invoked')
    })
    .set('drMy', function() {
        return {
            scope: {
                profile: {
                    name: 'Wes'
                }
            },
            link: function(scope, el) {
//                console.log("myDir has been linked", scope, el);
                scope.remove = function () {
                    app.removeChild(el);
                };
                scope.$on('$destroy', function () {
                    console.log("I am destroying myself...");
                });
            }
        };
    })
    .set('drYour', function() {
        return {
//            scope: {},// pass an object if isolated. not a true
            link: function(scope, el) {
                scope.name = 'Rob';
                scope.changeName = function(name) {
                    scope.name = name;
                };
//                console.log('your Dir has been linked', scope, el);
            }
        };
    })
    .set('drDeep', function () {
        return {
            scope:true,
            link: function(scope, el) {
                console.log(app.get('$rootScope'));
            }
        }
    })
    .filter('upper', function () {
        return function (str) {
            return str && str.toUpperCase() || '';
        };
    })
    .set('tpHello', '<div dr-your go-click="changeName(\'John\')">Goodbye, { name }!<div dr-my go-click="remove()">&nbsp;&nbsp;&nbsp;Goodbye, { profile.name }!</div></div>')
    .set('tpHello2', '<div dr-your go-click="changeName(\'Jared\')">Goodbye, { name }!<div>Goodbye, { name }!</div></div>')
    .set('tpDeep', '<div dr-my><span>Good Luck, { name }!</span><div dr-deep go-click="name=\'Sally\'">&nbsp;&nbsp;&nbsp;Deep Click, { name|upper }!</div></div>')
    .set('tpWes', document.getElementById('tpWes').innerHTML);

    app.addChild(body, app.view('tpHello'));
    app.addChild(body, app.view('tpHello2'));
    app.addChild(body, app.view('tpWes'));
    app.addChild(body, app.view('tpDeep'));
    //   document.querySelector('body').insertAdjacentHTML('afterend', view);
</script>
</body>
</html>