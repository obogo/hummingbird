<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../../src/app/__package__.js" type="text/javascript" charset="utf-8"></script>
    <script src="../../build/belt-app.js" type="text/javascript" charset="utf-8"></script>
    <style type="text/css">
        .app1 {
            background-color: rgba(255, 0, 0, 0.5);
        }
        .app2 {
            background-color: rgba(0, 200, 0, 0.5);
        }
    </style>
</head>
<body>

<div go-app="app1" class="app1"></div>
<div go-app="app2" class="app2">
    <div dr-your go-click="changeName('John')">Goodbye, { name }!<div dr-my go-click="remove()">&nbsp;&nbsp;&nbsp;Goodbye, { profile.name }!</div></div>
    <div dr-your go-click="changeName('Jared')">Goodbye, { name }!<div>Goodbye, { name }!</div></div>
    <div dr-my><span>Good Luck, { name }!</span><div dr-deep go-click="name='Sally'">&nbsp;&nbsp;&nbsp;Deep Click, { name|upper }!</div></div>
    <div dr-your ev-click="changeName('Wes')">Hello, { name }!</div>
</div>

<script id="tpWes" type="template/text">
    <div dr-your ev-click="changeName('Wes')">Hello, { name }!</div>
</script>

<script>
    var app1 = app.framework.module('app1')
    .set('drMy', function() {
        return {
            scope: {
                profile: {
                    name: 'Wes'
                }
            },
            link: function(scope, el) {
                scope.remove = function () {
                    app1.removeChild(el);
                };
                scope.$on('$destroy', function () {
                    console.log("I am destroying myself...");
                });
            }
        };
    })
    .set('drYour', function() {
        return {
            link: function(scope, el) {
                scope.name = 'Rob';
                scope.changeName = function(name) {
                    scope.name = name;
                };
            }
        };
    })
    .set('drDeep', function () {
        return {
            scope:true,
            link: function(scope, el) {
                console.log(app1.get('$rootScope'));
            }
        }
    })
    .filter('upper', function () {
        return function (str) {
            return str && str.toUpperCase() || '';
        };
    })
    .set('tpHello', '<div dr-your go-click="changeName(\'John\')">Goodbye, { name }!<div dr-my go-click="remove()">&nbsp;&nbsp;&nbsp;Goodbye, { profile.name }!</div></div>')
    .set('tpHello2', '<div dr-your go-click="changeName(\'Jared\')">Goodbye, { name }!<div>Goodbye, { name }!</div></div>')
    .set('tpDeep', '<div dr-my><span>Good Luck, { name }!</span><div dr-deep go-click="name=\'Sally\'">&nbsp;&nbsp;&nbsp;Deep Click, { name|upper }!</div></div>')
    .set('tpWes', document.getElementById('tpWes').innerHTML);

    app1.bootstrap(function (module) {
        module.addChild(module.element(), module.view('tpHello'));
        module.addChild(module.element(), module.view('tpHello2'));
        module.addChild(module.element(), module.view('tpWes'));
        module.addChild(module.element(), module.view('tpDeep'));
    });
</script>
<script>
    var app2 = app.framework.module('app2')
    .set('drMy', function() {
        return {
            scope: {
                profile: {
                    name: 'Wes'
                }
            },
            link: function(scope, el) {
                scope.remove = function () {
                    app2.removeChild(el);
                };
                scope.$on('$destroy', function () {
                    console.log("I am destroying myself...");
                });
            }
        };
    })
    .set('drYour', function() {
        return {
            link: function(scope, el) {
                scope.name = 'Rob';
                scope.changeName = function(name) {
                    scope.name = name;
                };
            }
        };
    })
    .set('drDeep', function () {
        return {
            scope:true,
            link: function(scope, el) {
                console.log(app2.get('$rootScope'));
            }
        }
    })
    .filter('upper', function () {
        return function (str) {
            return str && str.toUpperCase() || '';
        };
    });

</script>
</body>
</html>