!function(a,b){b.hb=a;var c={},d={},e={},f=function(b){var d=Array.prototype.slice.call(arguments);"function"==typeof d[1]?a[b]=d[1]():(c[b]=d[2],c[b].$inject=d[1],c[b].$internal=!1)},g=internal=function(a){var b=Array.prototype.slice.call(arguments);"function"==typeof b[1]?d[a]=b[1]():(c[a]=b[2],c[a].$inject=b[1],c[a].$internal=!0)},h=function(b,f){e[b]=!0;var g,i=f.$inject,j=[];for(var k in i)if(g=i[k],c[g]){if(e[g])throw new Error('Cyclical reference: "'+b+'" referencing "'+g+'"');h(g,c[g]),delete c[g]}if(!a[b]&&!d[b]){for(var l in i)g=i[l],j.push(a[g]||d[g]);f.$internal?d[b]=f.apply(null,j):a[b]=f.apply(null,j)}delete e[b]};g("http.jsonp",["http"],function(a){function b(){for(var a=0,b=d;window[b];)b=d+a,a+=1;return b}function c(a,b,c){window[a]=function(d){delete window[a],b(d),document.head.removeChild(c)}}var d="_jsonpcb";return a.jsonp=function(d,e,f){var g,h,i,j=b(),k={};if(void 0===d)throw new Error("CORS: url must be defined");if("object"==typeof d?k=d:("function"==typeof e&&(k.success=e),"function"==typeof f&&(k.error=f),k.url=d),k.callback=j,!a.handleMock(k)){i=document.createElement("script"),i.type="text/javascript",i.onload=function(){setTimeout(function(){window[j]&&f(d+" failed.")})},c(j,e,i),g=[];for(h in k)k.hasOwnProperty(h)&&g.push(h+"="+k[h]);i.src=d+"?"+g.join("&"),document.head.appendChild(i)}},a}),f("http",function(){function a(a){this.init(a)}function b(a){var b=c(this.getAllResponseHeaders()),d=this.responseText;return b.contentType&&-1!==b.contentType.indexOf("application/json")&&(d=d?JSON.parse(d):d),{data:d,request:{method:a.method,url:a.url,data:a.data,headers:a.headers},headers:b,status:this.status}}function c(a){for(var b,c=a.split("\n"),d={},e=0,f=c.length;f>e;)b=c[e].split(": "),b[0]&&b[1]&&(b[0]=b[0].split("-").join("").split(""),b[0][0]=b[0][0].toLowerCase(),d[b[0].join("")]=b[1]),e+=1;return d}function d(a,b){for(var c in b)b.hasOwnProperty(c)&&void 0===a[c]&&("object"==typeof b[c]?(a[c]={},d(a[c],b[c])):a[c]=b[c]);return a}function e(b){return!(!l.mocker||!l.mocker.handle(b,a))}var f,g=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")},h=window,i=function(){var a;return h.XMLHttpRequest&&"withCredentials"in new h.XMLHttpRequest?a=h.XMLHttpRequest:h.XDomainRequest&&(a=h.XDomainRequest),a}(),j=["head","get","post","put","delete"],k=j.length,l={};for(a.prototype.init=function(a){var b=this;return b.xhr=new i,b.method=a.method,b.url=a.url,b.success=a.success,b.error=a.error,b.data=a.data,b.headers=a.headers,a.credentials===!0&&(b.xhr.withCredentials=!0),b.send(),b},a.prototype.send=function(){var a=this;if("GET"===a.method&&a.data){var c=a.url.indexOf("?")>-1?"&":"?";a.url+=c+g(a.data)}else a.data=JSON.stringify(a.data);return void 0!==a.success&&(a.xhr.onload=function(){var c=b.call(this,a);this.status>=200&&this.status<300?a.success.call(this,c):void 0!==a.error&&a.error.call(this,c)}),void 0!==a.error&&(a.xhr.error=function(){var c=b.call(this,a);a.error.call(this,c)}),a.xhr.open(a.method,a.url,!0),void 0!==a.headers&&a.setHeaders(),a.xhr.send(a.data,!0),a},a.prototype.setHeaders=function(){var a,b=this,c=b.headers;for(a in c)c.hasOwnProperty(a)&&b.xhr.setRequestHeader(a,c[a]);return b},f=0;k>f;f+=1)!function(){var b=j[f];l[b]=function(c,e,f){var g={};if(void 0===c)throw new Error("CORS: url must be defined");return"object"==typeof c?g=c:("function"==typeof e&&(g.success=e),"function"==typeof f&&(g.error=f),g.url=c),g.method=b.toUpperCase(),d(g,l.defaults),l.handleMock(g)?void 0:new a(g).xhr}}();return l.mocker=null,l.handleMock=e,l.defaults={headers:{}},l}),g("query.width",["query","query.css"],function(a){a.fn.width=function(a){return this.css("width",a)}}),f("query",function(){function a(a,b){this.init(a,b)}var b=a.prototype=Object.create(Array.prototype);b.version="0.1.2",b.selector="",b.init=function(a,b){"string"==typeof a?"<"===a.substr(0,1)&&">"===a.substr(a.length-1,1)?this.parseHTML(a):this.parseSelector(a,b):a instanceof Array?this.parseArray(a):a instanceof Element&&this.parseElement(a)},b.parseHTML=function(a){var b=document.createElement("div");b.innerHTML=a,this.length=0,this.parseArray(b.children)},b.parseSelector=function(b,c){var d,e,f;for(this.selector=b,this.context=c instanceof Element?c:c instanceof a?c[0]:document,e=this.context.querySelectorAll(b),f=e.length,d=0,this.length=0;f>d;)this.push(e[d]),d+=1},b.parseArray=function(a){var b=0,c=a.length;for(this.length=0;c>b;)a[b]instanceof Element&&this.push(a[b]),b+=1},b.parseElement=function(a){this.length=0,this.push(a)},b.toString=function(){return this.length?this[0].outerHTML:void 0},b.each=function(a){for(var b,c=0,d=this.length;d>c&&(b=a.apply(this[c],[c,this[c]]),b!==!1);)c+=1;return this};var c=function(d,e){for(var f in c.fn)c.fn.hasOwnProperty(f)&&(b[f]=c.fn[f],delete c.fn[f]);return new a(d,e)};return c.fn={},c}),g("query.css",["query"],function(a){a.fn.css=function(a,b){var c,d;if(this.length){if(c=this[0],arguments.length>1&&this.each(function(c,d){d.style[a]=b}),a instanceof Array){var e=0,f=a.length;if(d={},c.currentStyle)for(;f>e;)d[a[e]]=c.currentStyle[a[e]],e+=1;else if(window.getComputedStyle)for(;f>e;)d[a[e]]=document.defaultView.getComputedStyle(c,null).getPropertyValue(a[e]),e+=1}else c.currentStyle?d=c.currentStyle[a]:window.getComputedStyle&&(d=document.defaultView.getComputedStyle(c,null).getPropertyValue(a));return d}return null}}),g("query.height",["query","query.css"],function(a){a.fn.height=function(a){return this.css("height",a)}}),internal("array.indexOf",function(){return Array.prototype.indexOf||(Array.prototype.indexOf=function(a){for(var b=0,c=this.length;c>b;){if(a===this[b])return b;b+=1}return-1}),!0}),internal("date.toISOString",function(){function a(a){return 10>a?"0"+a:a}return Date.prototype.toISOString||(Date.prototype.toISOString=function(){return this.getUTCFullYear()+"-"+a(this.getUTCMonth()+1)+"-"+a(this.getUTCDate())+"T"+a(this.getUTCHours())+":"+a(this.getUTCMinutes())+":"+a(this.getUTCSeconds())+"."+(this.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}),!0}),internal("string.supplant",function(){return String.prototype.supplant||(String.prototype.supplant=function(a){return this.replace(/{([^{}]*)}/g,function(b,c){var d=a[c];return"string"==typeof d||"number"==typeof d?d:b})}),!0}),internal("string.trim",["isString"],function(a){return String.prototype.trim?!0:function(b){return a(b)?b.replace(/^\s\s*/,"").replace(/\s\s*$/,""):b}}),f("isString",function(){var a=function(a){return"string"==typeof a};return a}),internal("window.console",function(){return"console"in window||(window.console={isOverride:!0,log:function(){},warn:function(){},info:function(){},error:function(){}}),!0}),f("module",["injector","interpolator","framework","framework.compiler","framework.scope","removeHTMLComments"],function(b,c,d,e,f,g){function h(a){function h(a){return a?a.scope?a.scope:h(a.parentNode):null}function i(a){a&&(this.element(a),this.ready())}function j(a,b,c,d){if(b){if(a!==u&&u.contains&&!u.contains(a))throw new Error("parent element not found in %o",u);a.insertAdjacentHTML("beforeend",g(b));var e=c||h(a),f=a.children[a.children.length-1];return k(f,c||e,!!c,d)}}function k(a,b,c,d){var e,f=c&&b||b.$new();if(d)for(e in d)d.hasOwnProperty(e)&&void 0!==!f[e]&&(f[e]=d[e]);return z.link(a,f),A(a,b),a}function l(b){var c;b.scope?(b.scope.$destroy(),b.scope=null):(c=b.querySelectorAll(a+"-id"),utils.each(c,l)),b.remove()}function m(a){return"undefined"!=typeof a&&(u=a,z.link(u,v),A(u,v)),u}function n(a,b){return void 0===b?C(a):(b.isClass=!0,C(a,b))}function o(a,b){var c,d=b.split(" ");for(var e in d)c=d[e],a.hasOwnProperty(c)&&a[c](this)}function p(a){o.apply(t,[d.directives,a])}function q(a){o.apply(t,[d.plugins,a])}function r(a){o.apply(t,[d.filters,a])}function s(){for(t.preInit&&t.preInit();w.length;)x.invoke(w.shift(),t);v.$apply(),v.$broadcast("module::ready")}var t=this;t.name=a;var u,v=f(),w=[],x=this.injector=b(),y=this.interpolator=c(x),z=e(t),A=z.compile,B=y.exec,C=x.val.bind(x);x.preProcessor=function(a,b){return b&&b.isClass?x.instantiate(b):void 0},C("$rootScope",v),v.interpolate=function(a,b,c){return"function"==typeof b?b(a,c):B(a,b)},t.bindingMarkup=[":=","=:"],t.elements={},t.bootstrap=i,t.findScope=h,t.addChild=j,t.removeChild=l,t.compile=k,t.interpolate=B,t.element=m,t.val=C,t.directive=C,t.filter=C,t.factory=C,t.service=n,t.template=C,t.useDirectives=p,t.usePlugins=q,t.useFilters=r,t.ready=s}var i={};return function(b,c){if(!b)throw a.errors.MESSAGES.E8;var d=i[b]=!c&&i[b]||new h(b);return d.injector.val("module")||(d.injector.val("module",d),d.injector.val("$window",window)),d}}),f("injector",function(){function a(a){var b;return a instanceof Array&&(a=a.concat(),b=a.pop(),b.$inject=a,a=b),a}function b(a,b){function c(){return a.apply(this,b)}return c.prototype=a.prototype,new c}function c(a){var b=a.toString();return b.match(/\(.*\)/)[0].match(/([\$\w])+/gm)}function d(){this.registered={},this.preProcessor=null}var e="string",f="function",g=d.prototype;return g.val=function(a,b){var c,d=a.toLowerCase();return void 0!==b?this.registered[d]=b:this.preProcessor&&(c=this.preProcessor(a,this.registered[d]),void 0!==c&&(this.registered[d]=c)),this.registered[d]},g.invoke=function(b,c,d){return b=a(b),b.apply(c,this.prepareArgs(b,d,c))},g.instantiate=function(c,d){return c=a(c),b(c,this.prepareArgs(c,d))},g.prepareArgs=function(a,b,d){a.$inject||(a.$inject=c(a));var e,f=a.$inject?a.$inject.slice():[],g=f.length;for(e=0;g>e;e+=1)this.getInjection(f[e],e,f,b,d);return f},g.getArgs=c,g.getInjection=function(a,b,c,d,g){var h,i;if(d&&d[a]?h=d[a]:void 0!==(i=this.val(a))&&(h=i),void 0===h)throw new Error("Injection not found for "+a);h instanceof Array&&typeof h[0]===e&&typeof h[h.length-1]===f&&(h=this.invoke(h.concat(),g)),c[b]=h},function(){return new d}}),f("interpolator",["each","removeLineBreaks","removeExtraSpaces"],function(a,b,c){function d(d){function e(a){l=a}function f(a,b,c,d){d&&d(a,'Error evaluating: "'+c+'" against %o',b)}function g(a,b){var c,d=0,e=[],f=0;for(a=a.replace(/('|").*?\1/g,function(a){var b="*"+d;return e.push(a),d+=1,b}),a=a.replace(/(\.?[a-zA-Z\$\_]+\w?\b)(?!\s?\:)/g,function(a){return"."===a.charAt(0)?a:h(a,b)}),c=e.length;c>f;)a=a.split("*"+f).join(e[f]),f+=1;return a}function h(a,b){a=a.trim();for(var c=[n];b&&void 0===b[a];)b=b.$parent,c.push("$parent");return b&&b[a]?c.join(".")+"."+a:n+"."+a}function i(b,c){if(-1!==b.indexOf("|")&&b.match(/\w+\s?\|\s?\w+/)){b=b.replace("||","~~");var e=b.trim().split("|");e[1]=e[1].replace("~~","||"),a.call({all:!0},e,k),e[1]=e[1].split(":");var f,g=e[1].shift(),h=d.val(g);return h?(f=e[1],a.call({all:!0},f,d.getInjection,c),{filter:function(a){return f.unshift(a),d.invoke(h,c,{alias:g}).apply(c,f)},str:e[0]}):e[0]}return void 0}function j(a,d,e){var h,j,k=Function;return d=b(d),(d=c(d))?(j=i(d,a),j&&(d=j.str),d=g(d,a),e?(h=new k("var result; try { result = "+d+"; } catch(er) { result = er; } finally { return result; }").apply(a),h&&"object"==typeof h&&(h.hasOwnProperty("stack")||h.hasOwnProperty("stacktrace")||h.hasOwnProperty("backtrace"))&&f(h,a,d,l)):h=new k("return "+d).apply(a),(void 0===h||null===h||h+""=="NaN")&&(h=""),j?j.filter(h):h):""}function k(a,b,c){c[b]=a&&a.trim()}var l,m=this,n="this";m.exec=j,m.setErrorHandler=e}return function(a){return new d(a)}}),f("each",function(){function a(a,b,c,d,e,f,g){var h=g?[c,d,e]:[c];return b.apply(a,h.concat(f))}var b=function(b,c){var d,e,f,g=0;if(arguments.length>2&&(f=Array.prototype.slice.apply(arguments),f.splice(0,2)),b&&b.length&&b.hasOwnProperty(0))for(d=b.length;d>g;){if(e=a(this.scope,c,b[g],g,b,f,this.all),void 0!==e)return e;g+=1}else if(!(b instanceof Array)&&void 0===b.length)for(g in b)if(b.hasOwnProperty(g)&&(!this.omit||!this.omit[g])&&(e=a(this.scope,c,b[g],g,b,f,this.all),void 0!==e))return e;return b};return b}),f("removeLineBreaks",function(){var a=function(a){return a+="",a.replace(/(\r\n|\n|\r)/gm,"")};return a}),f("removeExtraSpaces",function(){var a=function(a){return a+="",a.replace(/\s+/g," ")};return a}),internal("framework",function(){var a={debug:{},plugins:{},filters:{},errors:{},directives:{}},b="on";return a.on=function(a,c,d){a.attachEvent?a.attachEvent(b+c,a[c+d]):a.addEventListener(c,d,!1)},a.off=function(a,c,d){a.detachEvent?a.detachEvent(b+c,a[c+d]):a.removeEventListener(c,d,!1)},a}),internal("framework.compiler",["each"],function(a){function b(b){function c(a,b){for(var c,d,e=Array.prototype.slice.call(arguments,0),f=1,g=e.length;g>f;){c=e[f];for(d in c)c.hasOwnProperty(d)&&(a[d]=b[d]);f+=1}return a}function d(b,c){return b?void(8===b.nodeType?c.removeChild(b):b.childNodes&&a(b.childNodes,d,b)):!0}function e(a,c){if(a){var d=new RegExp(b.bindingMarkup[0]+"(.*?)"+b.bindingMarkup[1],"mg");return a.replace(d,function(a,b){var d=q.exec(c,b.trim(),!0);return"string"==typeof d||"number"==typeof d?d:"object"==typeof d?JSON.stringify(d):""})}return a}function f(a,c){var d=b.findScope(c);p.invoke(a.options.link,d,{scope:d,el:c,alias:a.alias})}function g(a,c){a&&(a.setAttribute(o,c.$id),b.elements[c.$id]=a,a.scope=c)}function h(a){var b,c,d,e,f=a.attributes,g=[{name:a.nodeName.toLowerCase(),value:""}],h=[],i=f.length;for(c=0;i>c;c+=1)b=f[c],g.push({name:b.name,value:a.getAttribute(b.name)});for(i=g.length,c=0;i>c;c+=1)b=g[c],d=b?b.name.split("-").join(""):"",e=p.val(d),e&&h.push({options:p.invoke(e),alias:{name:b.name,value:b.value}});return h}function i(a,b,d,e){var f=a.$new(d);return g(b,f),c(f,e),f}function j(c,d){if(3===c.nodeType){if(-1!==c.nodeValue.indexOf(b.bindingMarkup[0])&&!k(d,c)){var f=c.nodeValue;d.$watch(function(){return e(f,d)},function(a){c.nodeValue=a}),d.$w[0].node=c}}else!c.getAttribute(o)&&c.childNodes.length&&a(c.childNodes,j,d)}function k(a,b){for(var c=0,d=a.$w.length;d>c;){if(a.$w[c].node===b)return!0;c+=1}return!1}function l(b,c){if(!b.compiled){b.compiled=!0,a(b.childNodes,d,b);var e=h(b),g=[];e&&e.length&&(a(e,n,b,c,g),a(g,f,b))}if(b){c=b.scope||c;for(var i=0,j=b.children.length;j>i;)b.children[i].compiled||l(b.children[i],c),i+=1;b.getAttribute(o)&&m(b,c)}return b}function m(b,c){a(b.childNodes,j,c)}function n(a,c,d,e){var f,g=a.options;!c.scope&&g.scope&&(f=i(d,c,"object"==typeof a.options.scope,a.options.scope)),g.tpl&&(c.innerHTML="string"==typeof g.tpl?g.tpl:p.invoke(g.tpl,f||c.scope,{scope:f||c.scope,el:c,alias:a.alias})),g.tplUrl&&(c.innerHTML=b.val("string"==typeof g.tplUrl?g.tplUrl:p.invoke(g.tplUrl,f||c.scope,{scope:f||c.scope,el:c,alias:a.alias}))),b.preLink&&b.preLink(c,a),e.push(a)}var o=b.name+"-id",p=b.injector,q=b.interpolator,r=this;r.link=g,r.compile=l,r.preLink=null}return function(a){return new b(a)}}),internal("framework.scope",function(){function a(a){return Array[f].slice.call(a,0)||[]}function b(a,b){for(var c=!0,d=0,e=a.length;e>d;)b(a[d])||(c=!1),d+=1;return c}function c(){return(i++).toString(36)}function d(){}function e(){var a=this;a.$id=c(),a.$w=[],a.$lw=null,a.$aQ=[],a.$pQ=[],a.$r=a,a.$c=[],a.$l={},a.$ph=null}var f="prototype",g="error",h=console,i=1,j=e.prototype;return j.$watch=function(a,b,c){var e,f=this;e="string"==typeof a?function(){return f.interpolate(f,a)}:a;var g={watchFn:e,listenerFn:b||function(){},deep:!!c,last:d};return f.$w.unshift(g),f.$r.$lw=null,f.$lw=null,function(){var a=f.$w.indexOf(g);a>=0&&(f.$w.splice(a,1),f.$r.$lw=null)}},j.$$digestOnce=function(){var a=!1,b=!0,c=this;return c.$$scopes(function(c){if(c.$$ignore)return!0;for(var e,f,g,h=c.$w.length;h--;)if(g=c.$w[h])if(e=g.watchFn(c),f=g.last,c.$$areEqual(e,f,g.deep)){if(c.$r.$lw===g)return b=!1,!1}else c.$r.$lw=g,g.last=g.deep?JSON.stringify(e):e,g.listenerFn(e,f===d?e:f,c),a=!0;return b}),a},j.$digest=function(){var a,b=10,c=this;c.$r.$lw=null,c.$beginPhase("$digest");do{for(;c.$aQ.length;)try{var d=c.$aQ.shift();d.scope.$eval(d.exp)}catch(e){h[g](e)}if(a=c.$$digestOnce(),(a||c.$aQ.length)&&!b--)throw c.$clearPhase(),"10its"}while(a||c.$aQ.length);for(;c.$pQ.length;)try{c.$pQ.shift()()}catch(e){h[g](e)}c.$clearPhase()},j.$$areEqual=function(a,b,c){return c?JSON.stringify(a)===b:a===b||"number"==typeof a&&"number"==typeof b&&isNaN(a)&&isNaN(b)},j.$eval=function(a,b){return this.interpolate(this,a,b)},j.$apply=function(a){var b=this;try{if(b.$beginPhase("$apply"),a)return b.$eval(a)}finally{b.$clearPhase(),b.$r.$digest()}},j.$evalAsync=function(a){var b=this;b.$ph||b.$aQ.length||setTimeout(function(){b.$aQ.length&&b.$r.$digest()},0),b.$aQ.push({scope:b,exp:a})},j.$beginPhase=function(a){var b=this;b.$ph||(b.$ph=a)},j.$clearPhase=function(){this.$ph=null},j.$$postDigest=function(a){this.$pQ.push(a)},j.$new=function(a){var b,d=this;if(a)b=new e,b.$r=d.$r,b.$aQ=d.$aQ,b.$pQ=d.$pQ;else{var f=function(){};f.prototype=d,b=new f}return d.$c.push(b),b.$id=c(),b.$w=[],b.$l={},b.$c=[],b.$p=d,b},j.$ignore=function(a,c){var d=this;b(d.$c,function(b){b.$$ignore=a}),c||(d.$$ignore=a)},j.$$scopes=function(a){var c=this;return a(c)?b(c.$c,function(b){return b.$$scopes(a)}):!1},j.$destroy=function(){var a=this;if(a!==a.$r){var b=a.$p.$c,c=b.indexOf(a);c>=0&&(a.$broadcast("$destroy"),b.splice(c,1))}},j.$on=function(a,b){var c=this,d=c.$l[a];return d||(c.$l[a]=d=[]),d.push(b),function(){var a=d.indexOf(b);a>=0&&(d[a]=null)}},j.$emit=function(b){var c=this;if(!c.$$ignore||"$destroy"===c.eventName){var d=!1,e={name:b,targetScope:c,stopPropagation:function(){d=!0},preventDefault:function(){e.defaultPrevented=!0}},f=a(arguments);f.shift();var g=[e].concat(f),h=c;do e.currentScope=h,h.$$fire(b,g),h=h.$p;while(h&&!d);return e}},j.$broadcast=function(b){var c=this;if(!c.$$ignore||"$destroy"===c.eventName){var d={name:b,targetScope:c,preventDefault:function(){d.defaultPrevented=!0}},e=a(arguments);e.shift();var f=[d].concat(e);return c.$$scopes(function(a){return d.currentScope=a,a.$$fire(b,f),!0}),d}},j.$$fire=function(a,b){for(var c=this.$l[a]||[],d=0;d<c.length;)null===c[d]?c.splice(d,1):(c[d].apply(null,b),d++);return event},function(){return new e}}),f("removeHTMLComments",function(){var a=function(a){return a+="",a.replace(/<!--[\s\S]*?-->/g,"")};return a}),g("query.bind",["query"],function(a){a.fn.bind=a.fn.on=function(a,b){a=a.match(/\w+/gim);for(var c,d=0,e=a.length;e>d;)c=a[d],this.each(function(a,d){d.attachEvent?(d["e"+c+b]=b,d[c+b]=function(){d["e"+c+b](window.event)},d.attachEvent("on"+c,d[c+b])):d.addEventListener(c,b,!1),d.eventHolder||(d.eventHolder=[]),d.eventHolder[d.eventHolder.length]=[c,b]}),d+=1;return this}}),g("query.shortcuts",["query","isDefined"],function(a,b){a.fn.change=function(a){var c=this;return b(a)?c.on("change",a):c.trigger("change"),c},a.fn.click=function(a){var c=this;return b(a)?c.bind("click",a):c.trigger("click"),c}}),f("isDefined",function(){var a=function(a){return"undefined"!=typeof a};return a}),g("query.trigger",["query"],function(a){a.fn.trigger=function(a,b){var c;return document.createEvent?(c=document.createEvent("HTMLEvents"),c.initEvent(a,!0,!0)):(c=document.createEventObject(),c.eventType=a),c.eventName=a,c.data=b,this.each(function(a,b){document.createEvent?b.dispatchEvent(c):b.fireEvent("on"+c.eventType,c)}),this}}),g("query.unbind",["query"],function(a){a.fn.unbind=a.fn.off=function(a,b){if(1===arguments.length)this.unbindAll(a);else{a=a.match(/\w+/gim);for(var c,d=0,e=a.length;e>d;)c=a[d],this.each(function(a,d){d.detachEvent?(d.detachEvent("on"+c,d[c+b]),d[c+b]=null):d.removeEventListener(c,b,!1)}),d+=1}return this}}),g("query.unbindAll",["query"],function(a){a.fn.unbindAll=function(a){var b=this;return b.each(function(b,c){if(c.eventHolder)for(var d,e=0,f=0;f<c.eventHolder.length;f++)a&&c.eventHolder[f][0]!==a||(a=c.eventHolder[f][0],d=c.eventHolder[f][1],c.detachEvent?(c.detachEvent("on"+a,c[a+d]),c[a+d]=null):c.removeEventListener(a,d,!1),c.eventHolder.splice(f,1),e+=1,f-=1)}),b}}),internal("directives.app",["framework","ready"],function(a,b){return a.directives.app=function(a){a.directive(a.name+"App",function(){return{link:function(){}}}),b(function(){var b=document.querySelector("["+a.name+"-app]");b&&a.bootstrap(b)})}}),f("ready",function(){function a(){for(var a=0,b=c.length;b>a;)c[a](),a+=1;c.length=0}var b,c=[],d=window,e=document,f="addEventListener",g="removeEventListener",h="attachEvent",i="detachEvent",j="DOMContentLoaded",k="onreadystatechange",l="complete",m="readyState",n=function(a){c.push(a)};return e[f]?b=function(){e[g](j,b,!1),a()}:e.attachEvent&&(b=function(){e[m]===l&&(e[i](k,b),a())}),e[m]===l&&setTimeout(a,1),e[f]?(e[f](j,b,!1),d[f]("load",a,!1)):e[h]&&(e[h](k,b),d[h]("onload",a)),n}),internal("directives.autoscroll",["framework","query","query.bind","query.unbindAll"],function(a,b){return a.directives.autoscroll=function(a){a.directive("hbAutoscroll",function(){function c(a){var b=a.offsetHeight,c=getComputedStyle(a);return b+=parseInt(c.marginTop)+parseInt(c.marginBottom)}var d=b,e=window,f=function(a){return.5>a?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1},g=function(a,b,c,d){return c>d?b:a+(b-a)*f(c/d)},h=function(a,b,c,d,f){d=void 0===d?500:d,c=parseInt(c);var h=Date.now(),i=e.requestAnimationFrame||e.mozRequestAnimationFrame||e.webkitRequestAnimationFrame||function(a){e.setTimeout(a,15)},j=function(){var e=Date.now()-h;a.scrollTop=g(b,c,e,d),e>d?"function"==typeof f&&f(a):i(j)};j()};return{link:function(b,e,f){function g(){setTimeout(function(){Date.now();h(e,e.scrollTop,c(k)-c(e),j.duration)},j.delay||10)}var i=e.querySelectorAll("input,textarea"),j=a.interpolate(b,f.value),k=e.querySelector("*");b.$watch(j.watch,g);for(var l in i)d(i[l]).bind("focus",g);b.$on("$destroy",function(){for(var a in i)d(i[a]).unbindAll()})}}})}}),internal("directives.bridge",["framework","debounce"],function(a,b){return a.directives.bridge=function(a){a.directive("hbBridge",function(){return{scope:!0,link:function(c,d){function e(a){var b,c=a.split("-"),d=c.length;for(b=0;d>b;b+=1)c[b][0]=c[b][0].toUpperCase();return c.join("")}function f(a){return function(b){c[a]=b,j()}}var g,h,i,j,k,l,m,n=angular.element(d).scope(),o=c.$$fire,p=[],q=d.attributes.length;for(c.$$fire=function(a,b){o.call(c,a,b);var d=b.slice();d.unshift(a),n.$emit.apply(n,d),n.$apply()},j=b(function(){c.$apply()}),g=0;q>g;g+=1)h=d.attributes[g],i=h.name||h.nodeName||h.localName,l=e(i),m=d.getAttribute(i),m&&0!==i.indexOf("ng-")&&i!==a.name+"-id"&&!a.val(l)&&(console.log("watching "+i),k=f(l),p.push(n.$watch(m,k,!0)),k(n.$eval(m)));c.$on("$destroy",function(){for(;p.length;)p.pop()()})}}})}}),f("debounce",function(a){var a=function(a,b,c){var d;return function(){var e=this,f=arguments;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),c&&!d&&a.apply(e,f)}};return a}),internal("directives.class",["framework","query","query.class"],function(a,b){return a.directives["class"]=function(a){a.directive("hbClass",function(){var c=b;return{link:function(b,d,e){var f=c(d);b.$watch(function(){var c=a.interpolate(b,e.value);for(var d in c)c.hasOwnProperty(d)&&(c[d]?f.addClass(d):f.removeClass(d))})}}})}}),g("query.class",["query","isDefined"],function(a,b){a.fn.addClass=function(a){var b=this;return this.each(function(c,d){b.hasClass(d,a)||(d.className+=" "+a)}),this},a.fn.hasClass=function(a,b){return a.classList?a.classList.contains(b):new RegExp("(^| )"+b+"( |$)","gi").test(a.className)},a.fn.removeClass=function(a){var c=this;return this.each(function(d,e){if(b(a)){var f=" "+e.className.replace(/[\t\r\n]/g," ")+" ";if(c.hasClass(e,a)){for(;f.indexOf(" "+a+" ")>=0;)f=f.replace(" "+a+" "," ");e.className=f.replace(/^\s+|\s+$/g,"")}}else e.className=""}),this}}),internal("directives.cloak",["framework"],function(a){return a.directives.cloak=function(a){a.directive("hbCloak",function(){return{link:function(a,b,c){b.removeAttribute(c.name)}}})}}),internal("directives.disabled",["framework"],function(a){return a.directives.disabled=function(a){a.directive("hbDisabled",function(){return{link:function(a,b,c){var d="disabled";a.$watch(c.value,function(a){a?b.setAttribute(d,d):b.removeAttribute(d)})}}})}}),internal("directives.events",["framework","each"],function(a,b){function c(a,b,c){for(var d=0;d<e.length;d++)e[d]||(b=b.toLowerCase()),a.addEventListener(e[d]+b,c,!1)}var d="click mousedown mouseup keydown keyup touchstart touchend touchmove".split(" "),e=["webkit","moz","MS","o",""],f="AnimationStart AnimationEnd".split(" ");return a.directives.events=function(e){b(f,function(a){e.val(a,function(){return{link:function(b,d,f){function g(a){return"a"===a.target.nodeName.toLowerCase()&&a.preventDefault(),b.$event=a,a.target===d&&(e.interpolate(b,f.value),b.$apply()),!1}c(d,a,g)}}},"event")}),b(d,function(b){e.directive("hb"+b.charAt(0).toUpperCase()+b.substr(1),function(){return{link:function(c,d,f){function g(a){return"a"===a.target.nodeName.toLowerCase()&&a.preventDefault(),c.$event=a,e.interpolate(c,f.value),c.$apply(),!1}a.on(d,b,g)}}},"event")})}}),internal("directives.html",["framework"],function(a){return a.directives.html=function(a){a.directive("hbHtml",function(){return{link:function(a,b,c){a.$watch(c.value,function(a){b.innerHTML=a||""})}}})}}),internal("directives.ignore",["framework"],function(a){return a.directives.ignore=function(a){a.directive("hbIgnore",function(){return{scope:!0,link:function(a){a.$ignore(!0)}}})}}),internal("directives.model",["framework","resolve","query","query.bind","query.unbindAll"],function(a,b,c){return a.directives.model=function(a){a.directive("hbModel",function(){var a=c;return{link:function(c,d,e){function f(){b(c).set(e.value,d.value);var a=d.getAttribute("hb-change");a&&c.$eval(a),c.$apply()}var g=a(d);c.$watch(e.value,function(a){d.value=a}),g.bind("change keyup blur input onpropertychange",f),c.$on("$destroy",function(){g.unbindAll()})}}})}}),f("resolve",function(){function a(a){this.data=a||{}}var b=a.prototype;b.get=function(a,b){for(var c=a.split(b||"."),d="",e=0,f=c.length,g=this.data;f>e&&(d=c[e],g=g[d],void 0!==g);)e+=1;return g},b.set=function(a,b,c){for(var d=a.split(c||"."),e="",f=0,g=d.length-1,h=this.data;g>f;)e=d[f],h=void 0===h[e]?h[e]={}:h[e],f+=1;return d.length>1&&(h[d.pop()]=b),this.data},b.path=function(a){return this.set(a,{})};var c=function(b){return new a(b)};return c}),internal("directives.repeat",["framework","each"],function(a,b){return a.directives.repeat=function(a){function c(a,b,c){c[b]=a&&a.trim()}a.directive("hbRepeat",function(){return{link:function(d,e,f){function g(b){for(var c,f,g,i=0,k=Math.max(b.length,e.children.length);k>i;)c=e.children[i],c?b[i]?(f=c.scope,f[j]=b[i],f.$index=i):c.scope.$destroy():(g={},g[j]=b[i],g.$index=i,c=a.addChild(e,h,d.$new(),g)),i+=1}var h=e.children[0].outerHTML;e.removeChild(e.children[0]);var i=f.value;i=b.call({all:!0},i.split(/\s+in\s+/),c);var j=i[0],k=i[1];d.$watch(k,g,!0)}}})}}),internal("directives.show",["framework"],function(a){return a.directives.show=function(a){a.directive("hbShow",function(){return{scope:!0,link:function(a,b,c){a.$watch(c.value,function(c){c?(a.$ignore(!1,!0),b.style.display=null):(a.$ignore(!0,!0),b.style.display="none")})}}})}}),internal("directives.src",["framework"],function(a){return a.directives.src=function(a){return a.directive("hbSrc",function(){return{link:function(a,b,c){var d="src";a.$watch(c.value,function(a){a?b.setAttribute(d,a):b.removeAttribute(d)})}}})}}),internal("directives.view",["framework"],function(a){return a.directives.view=function(a){a.directive("hbView",function(){return{link:function(b,c,d){function e(b){return c.children.length&&a.removeChild(c.children[0]),a.addChild(c,a.val(b))}b.title="view",d.value&&b.$watch(d.value,e),b.$on("router::change",function(a,c,d,f){var g=e(c.templateName,null,d);g&&(g.scope.$state={current:c,params:d,prev:f}),b.$apply()})}}})}}),g("filters.lower",["framework"],function(a){return a.filters.upper=function(a){a.filter("upper",function(){return function(a){return(a+"").toUpperCase()}})}}),g("plugins.http",["framework","http"],function(a,b){return a.plugins.http=function(a){return a.injector.val("http",b)}}),g("plugins.mocks",["framework"],function(a){function b(a){var b=a.injector;b.val("$window",new c)}function c(){this._hist=[],this._listeners={},this.history=new e(this),this.document=new d(this),this.document.location.href="http://test.com/"}function d(a){this._hist=[],this._dispatcher=a,this.location=new i(a)}function e(a){this._hist=[],this._dispatcher=a}function f(a,b){var c,d,e,f,g,i,j={};for(c=a.split("#"),e=c[1]||"",d=e&&-1!==e.indexOf("?")?e.split("?").pop():"",c=c[0].split(":"),f=c[0]||b.protocol,c=c[1]?c[1].replace("//","").split("/"):[b.domain,b.pathname],g=c.shift().replace("/","");!c[0]&&c.length;)c.shift();return i=("/"+c.join("/")).replace("//","/"),utils.each(d.split("&"),h,j),{domain:g,hash:e,href:a||"",pathname:i,protocol:f,search:d}}function g(a){return a.protocol+"://"+a.domain+a.pathname+(a.hash?"#"+a.hash:"")+(a.search?"?"+a.search:"")}function h(a,b){var c=a.split("");b[c[0]]=c[1]}function i(a){this._hist=[],this._data={},this._dispatcher=a}return c.prototype={addEventListener:function(a,b){this._listeners[a]=this._listeners[a]||[],this._listeners[a].push(b),this._hist.push({method:"addEventListener",evt:a,fn:b})},removeEventListener:function(a,b){if(this._listeners[a]){var c=this._listeners[a].indexOf(b);-1!==c&&this._listeners[a].splice(c,1)}},dispatchEvent:function(a){this._listeners[a]&&utils.each(this._listeners[a],function(b){b(a)})}},d.prototype={},e.prototype={state:{},pushState:function(a,b,c){this._hist.push({method:"pushState",state:a,title:b,url:c}),this.state=a,this.title=b,this.url=c,this._dispatcher.document.location._data.href=c},replaceState:function(a,b,c){this._hist.push({method:"replaceState",state:a,title:b,url:c}),this.state=a,this.title=b,this.url=c,this._dispatcher.document.location._data.href=c}},i.prototype={get href(){return this._data.href},set href(a){this._data=f(a,this._data),this._dispatcher.dispatchEvent("popstate")},get hash(){return this._data.hash},set hash(a){this._data.hash=a,this._data.href=g(this._data),this._dispatcher.dispatchEvent("popstate")},get pathname(){return this._data.pathname}},a.plugins.mocks=function(a){return a.mocks=a.mocks||a.injector.instantiate(b)}}),g("plugins.router",["framework"],function(a){function b(b,c,d){function e(a){return"string"==typeof a?f(arguments[1],a):void utils.each.call({all:!0},a,f)}function f(a,c){a.id=c,A[c]=a,a.templateName=a.templateName||c,a.template&&b.val(a.templateName,a.template)}function g(a){delete A[a]}function h(a){return a.split("#").join("")}function i(a,b){a=h(a);var c={},d=[],e={url:b&&a.replace(/(\:\w+)/g,function(a,d){var e=d.substr(1);return c[e]=!0,b[e]})};return b&&(utils.each.call({all:!0},b,j,c,d),d.length&&(e.url=e.url.split("?").shift()+"?"+d.join("&"))),e}function j(a,b,c,d,e){d[b]||e.push(b+"="+a)}function k(a,b){var c,d=h(y.hash);c=p(d),c||(d=w.otherwise,b=!0,c=p(d));var e=n(c,d);q(c.id,e,b)}function l(a,b,c,d,e){":"===a[0]&&(d[a.replace(":","")]=e[b])}function m(a,b){var c=a.split("=");b[c[0]]=c[1]}function n(a,b){var c=b.split("?"),d=c[1],e={};return c=c[0].split("/"),utils.each.call({all:!0},a.url.split("/"),l,e,c),d&&utils.each(d.split("&"),m,e),e}function o(a,b){if(b){var c=a.url.replace(/[-[\]{}()*+?.,\\^$|#\s\/]/g,"\\$&"),d=new RegExp("^"+c.replace(/(:\w+)/g,"\\w+")+"$","i");return b.match(d)?a:void 0}}function p(a){var b=utils.each(A,o,a.split("?").shift());return b&&b.url?b:null}function q(a,b,c){var d=A[a],e=i(d.url,b),f=e.url||d.url;if(z.pushState)c||!z.state?z.replaceState({url:f,params:b},"",B+"#"+f):z.state&&z.state.url!==f&&z.pushState({url:f,params:b},"",B+"#"+f);else if(!c){if(y.hash==="#"+f)return;y.hash="#"+f}r(d,b)}function r(a,b){v=y.hash.replace("#",""),w.prev=t=u,w.current=u=a,w.params=b,c.$broadcast(w.events.CHANGE,u,b,t)}function s(){var a=y.hash.replace("#","");a!==v&&(k(null,!0),v=a)}var t,u,v,w=this,x={CHANGE:"router::change"},y=d.document.location,z=d.history,A={},B=y.pathname;a.on(d,"popstate",k),a.on(d,"hashchange",s),setInterval(s,100),w.events=x,w.go=c.go=q,w.resolveUrl=k,w.otherwise="/",w.add=e,w.remove=g,w.states=A,c.$on("module::ready",k)
}return a.plugins.router=function(a){var c=a.router=a.router||a.injector.instantiate(b);return a.injector.val("router",c)}}),f("isMobile",function(){var a=/iPhone/i,b=/iPod/i,c=/iPad/i,d=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,e=/Android/i,f=/IEMobile/i,g=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,h=/BlackBerry/i,i=/Opera Mini/i,j=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,k=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),l=function(a,b){return a.test(b)},m=function(m){var n=m||navigator.userAgent;return this.apple={phone:l(a,n),ipod:l(b,n),tablet:l(c,n),device:l(a,n)||l(b,n)||l(c,n)},this.android={phone:l(d,n),tablet:!l(d,n)&&l(e,n),device:l(d,n)||l(e,n)},this.windows={phone:l(f,n),tablet:l(g,n),device:l(f,n)||l(g,n)},this.other={blackberry:l(h,n),opera:l(i,n),firefox:l(j,n),device:l(h,n)||l(i,n)||l(j,n)},this.seven_inch=l(k,n),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},n=function(){var a=new m;return a.Class=m,a};return n()}),f("repeater",function(){var a=function(a,b,c){var d=this;d.count=0,d.delay=a||300,d.repeat=b||50,d.limit=c||0},b=a.prototype;return b.check=function(){var a=this;a.count+=1,a.limit&&a.count>=a.limit&&a.stop()},b.start=function(a){var b=this,c=typeof a;b.count=0,b.t=setTimeout(function(){b.t=setInterval(function(){b.check(),c&&a(b)},b.repeat),b.check(),c&&a(b)},b.delay),b.check(),c&&a(b)},b.stop=function(){var a=this;clearTimeout(a.t),clearInterval(a.t)},function(b,c,d){return new a(b,c,d)}}),f("timer",["dispatcher","stateMachine"],function(a,b){var c=function(d){function e(){f(),g()}function f(){b({target:o,initial:"ready",error:k,events:[{name:"start",from:"ready",to:"running"},{name:"start",from:"stop",to:"running"},{name:"stop",from:"running",to:"stop"},{name:"reset",from:"stop",to:"ready"}],callbacks:{onafterstart:h,onafterstop:i,onafterreset:j}})}function g(){a(o)}function h(){p=Date.now(),n=setInterval(function(){r=l(),o.dispatch(c.events.CHANGE,m())},d.frequency||1e3),o.dispatch(c.events.START,q)}function i(){clearInterval(n),r=l(),q+=r,o.dispatch(c.events.STOP,q)}function j(){q=0,o.dispatch(c.events.RESET,q)}function k(a,b,d,e,f,g){o.dispatch(c.events.ERROR,{name:a,from:b,to:d,args:e,errorCode:f,errorMessage:g})}function l(){return"ready"===o.current?0:Date.now()-p}function m(){var a=l();return q+a}d=d||{};var n,o=this,p=0,q=0,r=0;o.getTime=l,o.getTotalTime=m,e()};return c.events={START:"start",STOP:"stop",RESET:"reset",CHANGE:"change",ERROR:"error"},function(a){return new c(a)}}),f("dispatcher",function(){var a=function(a,b,c){function d(a,b){var c,d;d=j[a],d&&(b?(c=d.indexOf(b),-1!==c&&d.splice(c,1)):d.length=0)}function e(a,b){return j[a]=j[a]||[],j[a].push(b),function(){d(a,b)}}function f(c,f){function g(){d(c,g),f.apply(b||a,arguments)}return e(c,g)}function g(a){return j[a]}function h(b,c){return b&&b.apply(a,c)}function i(a){if(j[a])for(var b=0,c=j[a],d=c.length;d>b;)h(c[b],arguments),b+=1;j.all&&"all"!==a&&i("all")}var j={};b&&c?(a.on=b[c.on]&&b[c.on].bind(b),a.off=b[c.off]&&b[c.off].bind(b),a.once=b[c.once]&&b[c.once].bind(b),a.dispatch=a.fire=b[c.dispatch].bind(b)):(a.on=e,a.off=d,a.once=f,a.dispatch=a.fire=i),a.getListeners=g};return a}),f("stateMachine",function(){var a={VERSION:"2.3.0",Result:{SUCCEEDED:1,NOTRANSITION:2,CANCELLED:3,PENDING:4},Error:{INVALID_TRANSITION:100,PENDING_TRANSITION:200,INVALID_CALLBACK:300},WILDCARD:"*",ASYNC:"async",create:function(b,c){var d="string"==typeof b.initial?{state:b.initial}:b.initial,e=b.terminal||b["final"],f=c||b.target||{},g=b.events||[],h=b.callbacks||{},i={},j=function(b){var c=b.from instanceof Array?b.from:b.from?[b.from]:[a.WILDCARD];i[b.name]=i[b.name]||{};for(var d=0;d<c.length;d++)i[b.name][c[d]]=b.to||c[d]};d&&(d.event=d.event||"startup",j({name:d.event,from:"none",to:d.state}));for(var k=0;k<g.length;k++)j(g[k]);for(var l in i)i.hasOwnProperty(l)&&(f[l]=a.buildEvent(l,i[l]));for(var l in h)h.hasOwnProperty(l)&&(f[l]=h[l]);return f.current="none",f.is=function(a){return a instanceof Array?a.indexOf(this.current)>=0:this.current===a},f.can=function(b){return!this.transition&&(i[b].hasOwnProperty(this.current)||i[b].hasOwnProperty(a.WILDCARD))},f.cannot=function(a){return!this.can(a)},f.error=b.error||function(a,b,c,d,e,f,g){throw g||f},f.isFinished=function(){return this.is(e)},d&&!d.defer&&f[d.event](),f},doCallback:function(b,c,d,e,f,g){if(c)try{return c.apply(b,[d,e,f].concat(g))}catch(h){return b.error(d,e,f,g,a.Error.INVALID_CALLBACK,"an exception occurred in a caller-provided callback function",h)}},beforeAnyEvent:function(b,c,d,e,f){return a.doCallback(b,b.onbeforeevent,c,d,e,f)},afterAnyEvent:function(b,c,d,e,f){return a.doCallback(b,b.onafterevent||b.onevent,c,d,e,f)},leaveAnyState:function(b,c,d,e,f){return a.doCallback(b,b.onleavestate,c,d,e,f)},enterAnyState:function(b,c,d,e,f){return a.doCallback(b,b.onenterstate||b.onstate,c,d,e,f)},changeState:function(b,c,d,e,f){return a.doCallback(b,b.onchangestate,c,d,e,f)},beforeThisEvent:function(b,c,d,e,f){return a.doCallback(b,b["onbefore"+c],c,d,e,f)},afterThisEvent:function(b,c,d,e,f){return a.doCallback(b,b["onafter"+c]||b["on"+c],c,d,e,f)},leaveThisState:function(b,c,d,e,f){return a.doCallback(b,b["onleave"+d],c,d,e,f)},enterThisState:function(b,c,d,e,f){return a.doCallback(b,b["onenter"+e]||b["on"+e],c,d,e,f)},beforeEvent:function(b,c,d,e,f){return!1===a.beforeThisEvent(b,c,d,e,f)||!1===a.beforeAnyEvent(b,c,d,e,f)?!1:void 0},afterEvent:function(b,c,d,e,f){a.afterThisEvent(b,c,d,e,f),a.afterAnyEvent(b,c,d,e,f)},leaveState:function(b,c,d,e,f){var g=a.leaveThisState(b,c,d,e,f),h=a.leaveAnyState(b,c,d,e,f);return!1===g||!1===h?!1:a.ASYNC===g||a.ASYNC===h?a.ASYNC:void 0},enterState:function(b,c,d,e,f){a.enterThisState(b,c,d,e,f),a.enterAnyState(b,c,d,e,f)},buildEvent:function(b,c){return function(){var d=this.current,e=c[d]||c[a.WILDCARD]||d,f=Array.prototype.slice.call(arguments);if(this.transition)return this.error(b,d,e,f,a.Error.PENDING_TRANSITION,"event "+b+" inappropriate because previous transition did not complete");if(this.cannot(b))return this.error(b,d,e,f,a.Error.INVALID_TRANSITION,"event "+b+" inappropriate in current state "+this.current);if(!1===a.beforeEvent(this,b,d,e,f))return a.Result.CANCELLED;if(d===e)return a.afterEvent(this,b,d,e,f),a.Result.NOTRANSITION;var g=this;this.transition=function(){return g.transition=null,g.current=e,a.enterState(g,b,d,e,f),a.changeState(g,b,d,e,f),a.afterEvent(g,b,d,e,f),a.Result.SUCCEEDED},this.transition.cancel=function(){g.transition=null,a.afterEvent(g,b,d,e,f)};var h=a.leaveState(this,b,d,e,f);return!1===h?(this.transition=null,a.Result.CANCELLED):a.ASYNC===h?a.Result.PENDING:this.transition?this.transition():void 0}}};return function(b,c){return a.create(b,c)}}),f("stopwatch",["timer","dispatcher"],function(a,b){var c=function(d){function e(){y.options=d,C=E,f(),g(),h(),i(),setTimeout(function(){y.dispatch(c.events.READY)})}function f(){x=new a({frequency:G})}function g(){b(y)}function h(){y.start=p,y.stop=q,y.reset=r,y.getTime=j,y.getCountdown=k,y.getTimeRemaining=l,y.getState=n}function i(){x.on("start",s),x.on("change",t),x.on("stop",u),x.on("reset",v)}function j(){var a=Math.floor(B/F)*F;return a+D}function k(){return C}function l(){var a=j();return E?E-a:0}function m(a){return Math.floor(a/F)*F}function n(){return x.current}function o(a){B=m(a),E&&(C=E-B)}function p(){"ready"===n()&&x.start()}function q(){x.stop()}function r(){x.reset()}function s(a,b){o(b),y.dispatch(c.events.START)}function t(a,b){A=B,o(b),A!==B&&(A=B,y.dispatch(c.events.CHANGE),E&&j()>=E&&w(a,b))}function u(a,b){o(b),y.dispatch(c.events.STOP)}function v(a,b){o(b),y.dispatch(c.events.RESET)}function w(){z=!0,y.dispatch(c.events.DONE),x.stop()}d=d||{};var x,y=this,z=!1,A=0,B=0,C=0,D=d.startTime||0,E=d.endTime||0,F=d.tick||1e3,G=10;e()};return c.events={READY:"ready",START:"start",STOP:"stop",RESET:"reset",CHANGE:"change",DONE:"done",ERROR:"error"},function(a){return new c(a)}});for(var i in c)h(i,c[i])}({},function(){return this}());